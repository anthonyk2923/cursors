{"version":3,"file":"_page.svelte-UsRrdGWe.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_page.svelte.js"],"sourcesContent":["import { e as ensure_array_like, d as stringify, c as pop, p as push } from \"../../chunks/index.js\";\nimport { e as escape_html } from \"../../chunks/escaping.js\";\nimport \"clsx\";\nconst replacements = {\n  translate: /* @__PURE__ */ new Map([\n    [true, \"yes\"],\n    [false, \"no\"]\n  ])\n};\nfunction attr(name, value, is_boolean = false) {\n  if (value == null || !value && is_boolean || value === \"\" && name === \"class\") return \"\";\n  const normalized = name in replacements && replacements[name].get(value) || value;\n  const assignment = is_boolean ? \"\" : `=\"${escape_html(normalized, true)}\"`;\n  return ` ${name}${assignment}`;\n}\nfunction _page($$payload, $$props) {\n  push();\n  const socket = new WebSocket(\"wss://cursorsserver.onrender.com/ws\");\n  let curs = [];\n  let bullets = [];\n  let socketId;\n  socket.addEventListener(\"open\", () => console.log(\"WS connected\"));\n  socket.addEventListener(\"error\", console.error);\n  socket.addEventListener(\"close\", () => console.log(\"WS closed\"));\n  socket.addEventListener(\"message\", (event) => {\n    try {\n      const data = JSON.parse(event.data);\n      if (typeof data === \"object\" && data.type && data.payload) {\n        switch (data.type) {\n          case \"p\":\n            if (Array.isArray(data.payload)) {\n              curs = data.payload;\n            }\n            break;\n          case \"b\":\n            handleBullet(data.payload);\n            break;\n          case \"i\":\n            if (!socketId) {\n              const idData = JSON.parse(event.data);\n              socketId = idData.payload.id;\n              console.log(\"Assigned socket ID:\", socketId);\n            }\n            break;\n          default:\n            console.warn(\"Unknown message type:\", data.type);\n        }\n      }\n    } catch (error) {\n      console.log(\"Raw event data:\", event.data);\n    }\n  });\n  function handleBullet(bulletData) {\n    bullets = [...bullets, bulletData];\n    console.log(\"Before timeout:\", bullets);\n    setTimeout(\n      () => {\n        bullets = bullets.filter((b) => b !== bulletData);\n        console.log(\"After timeout:\", bullets);\n      },\n      500\n    );\n  }\n  const each_array = ensure_array_like(bullets);\n  const each_array_1 = ensure_array_like(curs);\n  $$payload.out += `<div class=\"h-screen w-screen cursor-none select-none\"><div class=\"bg-stone-950 relative w-full h-full pointer-events-none\">`;\n  {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--> <!--[-->`;\n  for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n    let bul = each_array[$$index];\n    $$payload.out += `<svg class=\"absolute inset-0 w-full h-full pointer-events-none select-none\"><line${attr(\"x1\", bul.fromPoint.x)}${attr(\"y1\", bul.fromPoint.y)}${attr(\"x2\", bul.isHit.x)}${attr(\"y2\", bul.isHit.y)}${attr(\"stroke\", `rgb(${bul.fromPoint.color.r}, ${bul.fromPoint.color.g}, ${bul.fromPoint.color.b}`)} stroke-width=\"2\" stroke-linecap=\"square\" stroke-dasharray=\"2,20\" stroke-opacity=\"0.5\"></line></svg>`;\n  }\n  $$payload.out += `<!--]--> <!--[-->`;\n  for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n    let cur = each_array_1[$$index_1];\n    $$payload.out += `<div class=\"absolute pointer-events-none select-none\"${attr(\"style\", `left: ${stringify(cur.x)}px; top: ${stringify(cur.y)}px;`)}><svg class=\"w-4 h-4 pointer-events-none select-none\" fill=\"none\"${attr(\"stroke\", `rgb(${cur.color.r}, ${cur.color.g}, ${cur.color.b}`)} stroke-width=\"2\" viewBox=\"0 0 24 24\"><path d=\"M12 2C8.134 2 5 5.134 5 9c0 5 7 13 7 13s7-8 7-13c0-3.866-3.134-7-7-7z\"></path><circle cx=\"12\" cy=\"9\" r=\"2.5\"></circle></svg></div>`;\n  }\n  $$payload.out += `<!--]--></div></div>`;\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}